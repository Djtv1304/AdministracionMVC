import{j as e}from"./jsx-runtime.ojTTAiD7.js";import{a as p}from"./_astro_actions.DCLOYqNE.js";import{r as m}from"./index.Dck49-wq.js";import{E as a}from"./ErrorMessageForm.Ct9yi1Us.js";import{S as j}from"./SuccessMessageForm.CLDkeGLG.js";const k=()=>{const[s,n]=m.useState({}),[c,d]=m.useState(null),[o,u]=m.useState({marca:"",modelo:"",anio:"",clasificacion:"",color:"",consumoCombustible:0,emisionesCO2:0,costoCombustible:0,capacidadTanque:0,imageURL:""}),l=t=>{const{name:i,value:r}=t.target;u({...o,[i]:r})},b=async t=>{t.preventDefault(),n({}),d(null);const i=new FormData(t.currentTarget),r=await p.newCombustionVehicle(i);if(r.error){console.error(r.error);const x={};r.error&&"fields"in r.error&&Object.entries(r.error.fields).forEach(([g,h])=>{x[g]=h[0]}),n(x);return}u({marca:"",modelo:"",anio:"",clasificacion:"",color:"",consumoCombustible:0,emisionesCO2:0,costoCombustible:0,capacidadTanque:0,imageURL:""}),d(r.data?.data??null),setTimeout(()=>{window.location.href="/vehicles"},3e3)};return e.jsxs("form",{className:"space-y-6",onSubmit:b,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"marca",className:"block text-sm font-medium text-gray-700",children:"Make"}),e.jsx("input",{type:"text",name:"marca",id:"marca",value:o.marca,onChange:l,className:"mt-1 p-2 block w-full shadow-lg sm:text-sm border-gray-300 rounded-md"}),s.marca&&e.jsx(a,{errorMessage:s.marca})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"modelo",className:"block text-sm font-medium text-gray-700",children:"Model"}),e.jsx("input",{type:"text",name:"modelo",id:"modelo",value:o.modelo,onChange:l,className:"mt-1 p-2 block w-full shadow-lg sm:text-sm border-gray-300 rounded-md"}),s.modelo&&e.jsx(a,{errorMessage:s.modelo})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"anio",className:"block text-sm font-medium text-gray-700",children:"Model Year"}),e.jsx("input",{type:"text",name:"anio",id:"anio",value:o.anio,onChange:l,className:"mt-1 p-2 block w-full shadow-lg sm:text-sm border-gray-300 rounded-md"}),s.anio&&e.jsx(a,{errorMessage:s.anio})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clasificacion",className:"block text-sm font-medium text-gray-700",children:"Vehicle Classification"}),e.jsxs("select",{id:"clasificacion",name:"clasificacion",className:"mt-1 block w-full pl-2 pr-10 py-2 text-base border-gray-300 focus:outline-none sm:text-sm rounded-md shadow-lg",value:o.clasificacion,onChange:l,children:[e.jsx("option",{value:"",children:"Please select a classification"}),e.jsx("option",{value:"SUV",children:"SUV"}),e.jsx("option",{value:"Sedan",children:"Sedan"}),e.jsx("option",{value:"Truck",children:"Truck"}),e.jsx("option",{value:"Coupe",children:"Coupe"}),e.jsx("option",{value:"Convertible",children:"Convertible"})]}),s.clasificacion&&e.jsx(a,{errorMessage:s.clasificacion})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-700",children:"Vehicle Color"}),e.jsx("input",{type:"text",name:"color",id:"color",value:o.color,onChange:l,className:"mt-1 p-2 block w-full shadow-lg sm:text-sm border-gray-300 rounded-md"}),s.color&&e.jsx(a,{errorMessage:s.color})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"consumoCombustible",className:"block text-sm font-medium text-gray-700",children:"Fuel Consumption (L/km)"}),e.jsx("input",{type:"number",name:"consumoCombustible",id:"consumoCombustible",value:o.consumoCombustible,onChange:l,className:"mt-1 p-2 block w-full shadow-lg sm:text-sm border-gray-300 rounded-md"}),s.consumoCombustible&&e.jsx(a,{errorMessage:s.consumoCombustible})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emisionesCO2",className:"block text-sm font-medium text-gray-700",children:"CO2 Emissions (g/km)"}),e.jsx("input",{type:"number",name:"emisionesCO2",id:"emisionesCO2",value:o.emisionesCO2,onChange:l,className:"mt-1 p-2 block w-full shadow-lg sm:text-sm border-gray-300 rounded-md"}),s.emisionesCO2&&e.jsx(a,{errorMessage:s.emisionesCO2})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"costoCombustible",className:"block text-sm font-medium text-gray-700",children:"Fuel Cost ($/L)"}),e.jsx("input",{type:"number",name:"costoCombustible",id:"costoCombustible",value:o.costoCombustible,onChange:l,className:"mt-1 p-2 block w-full shadow-lg sm:text-sm border-gray-300 rounded-md"}),s.costoCombustible&&e.jsx(a,{errorMessage:s.costoCombustible})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"capacidadTanque",className:"block text-sm font-medium text-gray-700",children:"Tank Capacity (L)"}),e.jsx("input",{type:"number",name:"capacidadTanque",id:"capacidadTanque",value:o.capacidadTanque,onChange:l,className:"mt-1 p-2 block w-full shadow-lg sm:text-sm border-gray-300 rounded-md"}),s.capacidadTanque&&e.jsx(a,{errorMessage:s.capacidadTanque})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"imageURL",className:"block text-sm font-medium text-gray-700",children:"Vehicle Image URL"}),e.jsx("input",{type:"text",name:"imageURL",id:"imageURL",value:o.imageURL,onChange:l,className:"mt-1 p-2 block w-full shadow-lg sm:text-sm border-gray-300 rounded-md"}),s.imageURL&&e.jsx(a,{errorMessage:s.imageURL})]})]}),s.general&&e.jsx(a,{errorMessage:s.general}),c&&e.jsx(j,{successMessage:c}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-lg text-sm font-medium rounded-md text-white bg-cyan-600 hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 ",children:"Register Vehicle"})})]})};export{k as default};
