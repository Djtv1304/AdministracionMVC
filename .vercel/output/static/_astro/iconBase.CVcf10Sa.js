import{R as p}from"./index.B52nOzfP.js";function m(t){const e=j(t),n=new ArrayBuffer(e.length),r=new DataView(n);for(let o=0;o<n.byteLength;o++)r.setUint8(o,e.charCodeAt(o));return n}const C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function j(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,r=0;for(let o=0;o<t.length;o++)n<<=6,n|=C.indexOf(t[o]),r+=6,r===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,e+=String.fromCharCode(n)):r===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const D=-1,U=-2,L=-3,B=-4,F=-5,k=-6;function M(t,e){return $(JSON.parse(t),e)}function $(t,e){if(typeof t=="number")return o(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,r=Array(n.length);function o(a,u=!1){if(a===D)return;if(a===L)return NaN;if(a===B)return 1/0;if(a===F)return-1/0;if(a===k)return-0;if(u)throw new Error("Invalid input");if(a in r)return r[a];const i=n[a];if(!i||typeof i!="object")r[a]=i;else if(Array.isArray(i))if(typeof i[0]=="string"){const s=i[0],f=e?.[s];if(f)return r[a]=f(o(i[1]));switch(s){case"Date":r[a]=new Date(i[1]);break;case"Set":const y=new Set;r[a]=y;for(let c=1;c<i.length;c+=1)y.add(o(i[c]));break;case"Map":const h=new Map;r[a]=h;for(let c=1;c<i.length;c+=2)h.set(o(i[c]),o(i[c+1]));break;case"RegExp":r[a]=new RegExp(i[1],i[2]);break;case"Object":r[a]=Object(i[1]);break;case"BigInt":r[a]=BigInt(i[1]);break;case"null":const d=Object.create(null);r[a]=d;for(let c=1;c<i.length;c+=2)d[i[c]]=o(i[c+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const c=globalThis[s],O=i[1],_=m(O),P=new c(_);r[a]=P;break}case"ArrayBuffer":{const c=i[1],O=m(c);r[a]=O;break}default:throw new Error(`Unknown type ${s}`)}}else{const s=new Array(i.length);r[a]=s;for(let f=0;f<i.length;f+=1){const y=i[f];y!==U&&(s[f]=o(y))}}else{const s={};r[a]=s;for(const f in i){const y=i[f];s[f]=o(y)}}return r[a]}return o(0)}const N={actionName:"_astroAction",actionPayload:"_astroActionPayload",actionRedirect:"_astroActionRedirect"},V=N,w={BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,TIMEOUT:405,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500},Q=Object.entries(w).reduce((t,[e,n])=>({...t,[n]:e}),{});class l extends Error{type="AstroActionError";code="INTERNAL_SERVER_ERROR";status=500;constructor(e){super(e.message),this.code=e.code,this.status=l.codeToStatus(e.code),e.stack&&(this.stack=e.stack)}static codeToStatus(e){return w[e]}static statusToCode(e){return Q[e]??"INTERNAL_SERVER_ERROR"}static fromJson(e){return z(e)?new J(e.issues):Y(e)?new l(e):new l({code:"INTERNAL_SERVER_ERROR"})}}function Y(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="AstroActionError"}function z(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="AstroActionInputError"&&"issues"in t&&Array.isArray(t.issues)}class J extends l{type="AstroActionInputError";issues;fields;constructor(e){super({message:`Failed to validate: ${JSON.stringify(e,null,2)}`,code:"BAD_REQUEST"}),this.issues=e,this.fields={};for(const n of e)if(n.path.length>0){const r=n.path[0].toString();this.fields[r]??=[],this.fields[r]?.push(n.message)}}}function G(t){return`?${new URLSearchParams({[N.actionName]:t}).toString()}`}function A(t){if(t.type==="error"){let e;try{e=JSON.parse(t.body)}catch{return{data:void 0,error:new l({message:t.body,code:"INTERNAL_SERVER_ERROR"})}}return{error:l.fromJson(e),data:void 0}}return t.type==="empty"?{data:void 0,error:void 0}:{data:M(t.body,{URL:e=>new URL(e)}),error:void 0}}const q="%2E";function I(t={},e=""){return new Proxy(t,{get(n,r){if(r in n||typeof r=="symbol")return n[r];const o=e+encodeURIComponent(r.toString()).replaceAll(".",q);function a(u){return b(u,o)}return Object.assign(a,{queryString:G(o),toString:()=>a.queryString,$$FORM_ACTION:function(){const u=new URLSearchParams(a.toString());return u.set(V.actionRedirect,"false"),{method:"POST",name:"_astroAction",action:"?"+u.toString()}},async orThrow(u){const{data:i,error:s}=await b(u,o);if(s)throw s;return i}}),I(a,o+".")}})}async function b(t,e,n){const r=new Headers;r.set("Accept","application/json");let o=t;if(!(o instanceof FormData)){try{o=JSON.stringify(t)}catch(u){throw new l({code:"BAD_REQUEST",message:`Failed to serialize request body to JSON. Full error: ${u.message}`})}o?r.set("Content-Type","application/json"):r.set("Content-Length","0")}const a=await fetch(`${"/".replace(/\/$/,"")}/_actions/${e}`,{method:"POST",body:o,headers:r});return a.status===204?A({type:"empty",status:204}):A({type:a.ok?"data":"error",body:await a.text()})}const rt=I();var T={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},R=p.createContext&&p.createContext(T),H=["attr","size","title"];function W(t,e){if(t==null)return{};var n=x(t,e),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)r=a[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function x(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function E(){return E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E.apply(this,arguments)}function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S(Object(n),!0).forEach(function(r){Z(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z(t,e,n){return e=X(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X(t){var e=K(t,"string");return typeof e=="symbol"?e:e+""}function K(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v(t){return t&&t.map((e,n)=>p.createElement(e.tag,g({key:n},e.attr),v(e.child)))}function nt(t){return e=>p.createElement(tt,E({attr:g({},t.attr)},e),v(t.child))}function tt(t){var e=n=>{var{attr:r,size:o,title:a}=t,u=W(t,H),i=o||n.size||"1em",s;return n.className&&(s=n.className),t.className&&(s=(s?s+" ":"")+t.className),p.createElement("svg",E({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,u,{className:s,style:g(g({color:t.color||n.color},n.style),t.style),height:i,width:i,xmlns:"http://www.w3.org/2000/svg"}),a&&p.createElement("title",null,a),t.children)};return R!==void 0?p.createElement(R.Consumer,null,n=>e(n)):e(T)}export{nt as G,rt as a};
